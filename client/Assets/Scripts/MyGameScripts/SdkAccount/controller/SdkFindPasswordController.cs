// **********************************************************************
// Copyright (c) 2016 Baoyugame. All rights reserved.
// Author : Xianjian
// Created : 9/29/2016 5:18:22 PM
// Desc	: Auto generated by MarsZ. update this if need.
// **********************************************************************

using UnityEngine;

 /// <summary>
 /// This is the controller class for module FindPassword, use this to control the ui or view , such as it's init , update or dispose.
 /// @Xianjian in 9/29/2016 5:18:22 PM
 /// </summary>
public class SdkFindPasswordController : MonoViewController<SdkFindPasswordView>
{
    protected override void RegisterEvent()
    {
        EventDelegate.Set(_view.BackBtn.onClick, () => { SdkProxyModule.CloseModuleSlow(SdkFindPasswordView.NAME); });
        EventDelegate.Set(_view.GetCodeBtn.onClick, OnGetCode);
    }

    public void OnGetCode()
    {
        string phone = _view.AccoutInput.value;
        if (!SdkAccountModel.CheckPhone(phone))
        {
            return;
        }

        SdkService.RequestPhoneCode(phone, (code) =>
        {
            if (BaseView.IsViewDestroy(View))
                return;

            if (code == 0)
            {
                var com = SdkProxyModule.OpenModule<SdkFindPasswordConfirmController>(SdkFindPasswordConfirmView.NAME);
                com.InitData(phone);
            }
        });
    }
}
