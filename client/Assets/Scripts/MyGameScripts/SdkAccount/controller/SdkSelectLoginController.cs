// **********************************************************************
// Copyright (c) 2016 Baoyugame. All rights reserved.
// Author : Xianjian
// Created : 10/8/2016 2:29:23 PM
// Desc	: Auto generated by MarsZ. update this if need.
// **********************************************************************

using UnityEngine;
using SdkAccountDto;

/// <summary>
/// This is the controller class for module SelectLogin, use this to control the ui or view , such as it's init , update or dispose.
/// @Xianjian in 10/8/2016 2:29:23 PM
/// </summary>
public class SdkSelectLoginController : MonoViewController<SdkSelectLoginView>
{
    protected override void InitView()
    {
        bool isSupportQRLogin = SdkLoginMessage.Instance.GetIsSupportQRLogin();
        // View.QQLoginBtn.gameObject.SetActive(!isSupportQRLogin);
        View.QuickLoginBtn.gameObject.SetActive(isSupportQRLogin);
        View.PlatformLoginBtn.gameObject.SetActive(isSupportQRLogin);
        View.QRLoginBtn.gameObject.SetActive(isSupportQRLogin);
        View.QuickLoginBtnEx.gameObject.SetActive(!isSupportQRLogin);
        View.PlatformLoginBtnEx.gameObject.SetActive(!isSupportQRLogin);

        View.BtnGrid.Reposition();
    }

    protected override void RegisterEvent()
    {
        EventDelegate.Set(_view.QuickLoginBtn.onClick, OnQuickLogin);
        EventDelegate.Set(_view.PlatformLoginBtn.onClick, OnPlatformLogin);
        //EventDelegate.Set(_view.QQLoginBtn.onClick, OnQQLogin);
        EventDelegate.Set(View.QRLoginBtn.onClick, OnQRLogin);
        EventDelegate.Set(_view.QuickLoginBtnEx.onClick, OnQuickLogin);
        EventDelegate.Set(_view.PlatformLoginBtnEx.onClick, OnPlatformLogin);
    }

    public void OnQuickLogin()
    {
        SdkProxyModule.OpenModule<SdkDeviceNoticeController>(SdkDeviceNotice.NAME);
    }

    public void OnPlatformLogin()
    {
        SdkProxyModule.OpenModule<SdkPlatformLoginController>(SdkPlatformLoginView.NAME);
    }

    public void OnQQLogin()
    {
        SdkAccountModel.Instance.DoQQLogin();
    }

    public void OnQRLogin()
    {
        SdkProxyModule.CloseModuleNow(SdkSelectLoginView.NAME);
        //xxj begin
        //SdkLoginMessage.Instance.Sdk2CLoginForQR();
        //xxj end

        string dataJson = "{}";
        string json = "{\"type\":\"login2Show\",\"code\":\"0\",\"data\":" + dataJson + "}";
        GameDebug.Log("login json=" + json);
        SPSDK.OnSdkCallback(json);
    }
}
